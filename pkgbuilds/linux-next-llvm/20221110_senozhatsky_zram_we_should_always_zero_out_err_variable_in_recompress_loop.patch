From git@z Thu Jan  1 00:00:00 1970
Subject: [PATCH] zram: we should always zero out err variable in recompress loop
From: Sergey Senozhatsky <senozhatsky@chromium.org>
Date: Thu, 10 Nov 2022 23:34:23 +0900
Message-Id: <20221110143423.3250790-1-senozhatsky@chromium.org>
To: Andrew Morton <akpm@linux-foundation.org>
Cc: Minchan Kim <minchan@kernel.org>, Nitin Gupta <ngupta@vflare.org>, Suleiman Souhlal <suleiman@google.com>, linux-kernel@vger.kernel.org, linux-mm@kvack.org, llvm@lists.linux.dev, Sergey Senozhatsky <senozhatsky@chromium.org>, Nathan Chancellor <nathan@kernel.org>
In-Reply-To: <20221109115047.2921851-5-senozhatsky@chromium.org>
References: <20221109115047.2921851-5-senozhatsky@chromium.org>
List-Id: <llvm.lists.linux.dev>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 7bit

Reported-by: Nathan Chancellor <nathan@kernel.org>
Signed-off-by: Sergey Senozhatsky <senozhatsky@chromium.org>
Link: https://lore.kernel.org/r/20221110143423.3250790-1-senozhatsky@chromium.org
---
 drivers/block/zram/zram_drv.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/block/zram/zram_drv.c b/drivers/block/zram/zram_drv.c
index 171eccc2249d..9d33801e8ba8 100644
--- a/drivers/block/zram/zram_drv.c
+++ b/drivers/block/zram/zram_drv.c
@@ -1891,7 +1891,7 @@ static ssize_t recompress_store(struct device *dev,
 
 	ret = len;
 	for (index = 0; index < nr_pages; index++) {
-		int err;
+		int err = 0;
 
 		zram_slot_lock(zram, index);
 
-- 
2.38.1.431.g37b22c650d-goog

